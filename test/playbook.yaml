- hosts: host
  become: true
  tasks:
    # Move the app folder
    - name: Move app folder
      command: mv /home/ubuntu/app /var/www/html/




    # Add configurations to Apache configuration file
    - name: Add configurations to Apache configuration file
      blockinfile:
        path: /etc/apache2/sites-enabled/000-default.conf
        block: |
          # WSGI Configuration for Flask Application
          WSGIDaemonProcess app threads=5
          WSGIScriptAlias / /var/www/html/app/app.wsgi

          # Directory Configuration for Flask Application
          <Directory /var/www/html/app>
              WSGIProcessGroup app
              WSGIApplicationGroup %{GLOBAL}
              Order allow,deny
              Allow from all
          </Directory>
      notify: Restart Apache service

  handlers:
    # Restart Apache service handler
    - name: Restart Apache service
      service:
        name: apache2
        state: restarted
